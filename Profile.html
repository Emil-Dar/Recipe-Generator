<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUTONG LIKHA</title>
    <link rel="stylesheet" href="styles.css"> <!-- Linking the external CSS file -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">

    <style>
        .top-bar {
            position: fixed; /* Make the top bar fixed */
            top: 0; /* Stick it to the top of the viewport */
            left: 0; /* Align it to the left side */
            width: 100%; /* Make it full width */
            background-color: #F5C184; /* Adjust background color as needed */
            z-index: 1000; /* Ensure it's above other content */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            padding-top: 10%; /* Initial padding-top */
        }
        header {
            background-color: #000;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .profile-info {
            text-align: center;
            padding: 20px;
        }
        .profile-picture {
            border-radius: 50%;
            width: 150px;
            height: 150px;
            object-fit: cover;
        }
        .username {
            font-size: 24px;
            margin-top: 10px;
        }
        .bio {
            font-style: italic;
            margin-top: 10px;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-label {
            font-size: 14px;
            color: #888;
        }
        .stat-value {
            font-size: 18px;
            font-weight: bold;
        }
        footer {
            background-color: #f0f0f0;
            padding: 20px;
            text-align: center;
        }
    
        /* CSS to align profile info and buttons */
        .container {
            padding: 20px;
            display: flex;
            flex-direction: column; /* Align items vertically */
            justify-content: flex-start; /* Align items to the start */
            align-items: center; /* Align items to the start */
        }

    
        .profile-info {
            padding: 20px;
            width: calc(33.33% - 40px); /* One-third of the screen width */
        }
    
        .profile-picture {
            width: 100px; /* Adjust size as needed */
            height: 100px; /* Adjust size as needed */
            border-radius: 50%; /* Make it circular */
        }
    
        .username {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
        }
    
        .bio {
            margin-top: 5px;
        }
    
        .stats {
            margin-top: 20px;
        }
    
        .stat-item {
            display: inline-block;
            margin-right: 20px;
        }
    
        .stat-label {
            font-weight: bold;
        }
    
        .stat-value {
            margin-top: 5px;
        }
    
        .buttons-container {
            width: 100%; /* Set the width to 100% */
            padding: 20px;
            display: flex;
            justify-content: space-between; /* Space between buttons */
            flex-direction: row; /* Change to row for horizontal alignment */
            align-items: center; /* Center items vertically */
            margin-bottom: 20px; /* Add margin to create space between buttons and content */
            border: 1px solid black;
        }

        .post-button,
        .drafts-button {
            width: calc(50% - 10px); /* Share 50% of the width each with 10px gap */
            padding: 10px 20px;
            background-color: transparent; /* Set background color to transparent */
            border: none;
            color: black; /* Text color */
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-right: 0; /* Remove margin-right */
            cursor: pointer;
            position: relative;
            font-family: 'Roboto', sans-serif;
        }

        /* Underline style */
        .button-underline {
            position: absolute;
            bottom: -2px; /* Adjust the position of the underline */
            left: 0;
            height: 2px;
            background-color: black; /* Color of the underline */
            width: 0;
            transition: width 0.3s ease; /* Animation for the underline */
        }

        /* Apply underline when button is active */
        .post-button.active .button-underline,
        .drafts-button.active .button-underline {
            width: 100%; /* Full width of the button */
        }

        /* Content sections for Posts and Drafts */
        .content {
            display: none;
            padding: 20px;
            margin-top: 20px; /* Add margin at the top of the content */
            width: 100%; /* Ensure content spans the full width */
        }

        .content.active {
            display: block;
        }

        .post-drafts-container {
            display: flex;
            flex-direction: column; /* Stack content vertically */
            align-items: flex-start; /* Align content to the start (left side) */
            width: 100%; /* Set width to 100% */
        }
        .add-button {
            position: fixed; /* Fixed position */
            bottom: 20px; /* Adjust the distance from the bottom */
            right: 20px; /* Adjust the distance from the right */
            z-index: 1000;
        }

        .add-post-button {
            border-radius: 50%; /* Make the button circular */
            width: 60px; /* Adjust width to make it circular */
            height: 60px; /* Adjust height to make it circular */
            font-size: 30px;
            line-height: 60px; /* Center the text vertically */
            background-color: #b98c53;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
            border: none;
        }

        .add-post-button:hover {
            background-color: #a2723a;;
        }

        
        .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1000; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        padding-top: 100px; /* Center and add padding */
        }

        .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 40%;
        }

        .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        }

        .close:hover,
        .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 20px;
        }

        .button-container button {
            width: 45%; /* Adjust the width as needed */
        }

        .saved-items-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start; /* Align items to the start */
            gap: 5px; /* Adjust the space between saved items */
        }

        .saved-item {
            min-width: 0; /* Reset the minimum width */
            width: calc(22% - 5px); /* Set width to 20% of the container width minus the gap */
            max-width: calc(22% - 5px); /* Ensure maximum width is 20% minus the gap */
            padding: 15px;
            background-color: #FFFFF0;
            border-radius: 6px;
            cursor: pointer;
            transition: all ease 0.4s;
            position: relative;
            border: 1px solid #ccc;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }


        .saved-item img {
            max-width: 100%;
            height: auto;
        }

        .saved-item h4 {
            margin-top: 10px;
            font-size: 18px;
            font-weight: bold;
        }

        .saved-item p {
            margin-top: 5px;
            font-size: 14px;
        }
        
    </style>
    
</head>
<body>
    <div class="top-bar">
        <img class="logo" src="image/Logo.png" alt="LUTONG LIKHA Logo">
        <h1>LUTONG LIKHA</h1>
        <div class="search-bar">
            <input type="search" placeholder="Search for recipes">
        </div>
        <ul class="menu">
            <li><a href="Home.html">Home</a></li>
            <li><a href="Trending.html">Trending</a></li>
            <li><a href="Saved.html">Save</a></li>
            <li><a href="Profile.html">Profile</a></li>
        </ul>
    </div>

    <div class="container">
        <div class="profile-info">
            <img src="image/profile_pic.jpg" alt="Profile Picture" class="profile-picture">
            <div class="username">Username</div>
            <div class="bio">Bio goes here</div>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Followers</div>
                    <div class="stat-value">---</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Following</div>
                    <div class="stat-value">---</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Likes</div>
                    <div class="stat-value">---</div>
                </div>
            </div>
        </div>
        <div class="buttons-container">
            <button class="post-button active" onclick="toggleButton(this)">Posts<span class="button-underline"></span></button>
            <button class="drafts-button" onclick="toggleButton(this)">Drafts<span class="button-underline"></span></button>
            
        </div>
        <div class="post-drafts-container">
            <div id="post-content" class="content active">
                <div id="posts-container" class="saved-items-container"></div> <!-- Container for the created posts -->
            </div>
        
            <!-- Content for Drafts -->
            <div id="drafts-content" class="content">
                
            </div>
        </div>
        <div class="add-button">
            <button class="add-post-button" onclick="openModal()">+</button>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Create Post</h2>
            <input type="file" accept="image/*" id="photoInput" onchange="previewPhoto(event)">
            <img src="#" alt="Preview Image" id="previewImage" style="display:none; max-width: 100%; max-height: 200px; margin-top: 10px;">
            <input type="text" placeholder="Enter title..." id="postTitle" style="display:block; width:100%; margin-top: 10px;">
            <textarea rows="2" cols="50" placeholder="Enter short description..." id="shortDescription" style="display:block; width:100%; margin-top: 10px;"></textarea>
            <textarea rows="4" cols="50" placeholder="Enter ingredients..." id="postIngredients" style="display:block; width:100%; margin-top: 10px;"></textarea>
            <div id="instructionsContainer" style="display:block; width:100%; margin-top: 10px;">
                <input type="text" placeholder="1. Enter instruction..." class="instructionInput" oninput="addOrRemoveInstructionInput(event)">
            </div>
            <div class="button-container">
                <button class="create-post-button" onclick="createPost()">Create Post</button>
                <button class="save-draft-button" onclick="saveDraft()">Save in Drafts</button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Lutong Likha</p>
    </footer>

    <script>
        function toggleButton(button) {
            // Remove 'active' class from all buttons
            const buttons = document.querySelectorAll('.post-button, .drafts-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Add 'active' class to the clicked button
            button.classList.add('active');

            // Toggle content visibility based on button clicked
            const contentId = button.classList.contains('post-button') ? 'post-content' : 'drafts-content';
            const contents = document.querySelectorAll('.content');
            contents.forEach(content => {
                content.classList.remove('active');
                if (content.id === contentId) {
                    content.classList.add('active');
                }
            });
        }

        function openModal() {
            var modal = document.getElementById("myModal");
            modal.style.display = "block";
        }

        // Function to preview selected photo
        function previewPhoto(event) {
            var preview = document.getElementById('previewImage');
            var file = event.target.files[0];
            var reader = new FileReader();
        
            reader.onloadend = function () {
                preview.src = reader.result;
                preview.style.display = 'block';
            }
        
            if (file) {
                reader.readAsDataURL(file);
            } else {
                preview.src = '';
                preview.style.display = 'none';
            }
        }

        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Function to add or remove instruction input fields dynamically
        function addOrRemoveInstructionInput(event) {
            var container = document.getElementById('instructionsContainer');
            var inputFields = container.getElementsByClassName('instructionInput');
            var currentInput = event.target;

            // Add a new input field if the last input is not empty
            if (inputFields[inputFields.length - 1] === currentInput && currentInput.value.trim() !== '') {
                var newInput = document.createElement('input');
                newInput.type = 'text';
                newInput.placeholder = (inputFields.length + 1) + '. Enter instruction...';
                newInput.className = 'instructionInput';
                newInput.style.display = 'block';
                newInput.style.width = '100%';
                newInput.style.marginTop = '10px';
                newInput.oninput = addOrRemoveInstructionInput;

                container.appendChild(newInput);
            }

            // Remove trailing empty input fields
            for (var i = inputFields.length - 1; i > 0; i--) {
                if (inputFields[i].value.trim() === '' && inputFields[i - 1].value.trim() === '') {
                    container.removeChild(inputFields[i]);
                } else {
                    break;
                }
            }
        }

        // Function to create a new post
        function createPost() {
            var title = document.getElementById('postTitle').value.trim();
            var shortDescription = document.getElementById('shortDescription').value.trim();
            var ingredients = document.getElementById('postIngredients').value.trim();

            // Get instructions
            var instructionsContainer = document.getElementById('instructionsContainer');
            var instructionInputs = instructionsContainer.getElementsByClassName('instructionInput');
            var instructions = [];
            for (var i = 0; i < instructionInputs.length; i++) {
                if (instructionInputs[i].value.trim() !== '') {
                    instructions.push(instructionInputs[i].value.trim());
                }
            }

            // Get photo
            var photo = document.getElementById('previewImage').src;

            // Check for missing fields
            if (!title || !shortDescription || !ingredients || instructions.length === 0 || !photo) {
                alert('Please fill in all fields and upload a photo.');
                return;
            }

            // Create the post
            var post = document.createElement('div');
            post.className = 'saved-item';

            // Add photo
            var postImage = document.createElement('img');
            postImage.src = photo;
            post.appendChild(postImage);

            // Add title
            var postTitle = document.createElement('h4');
            postTitle.textContent = title;
            post.appendChild(postTitle);

            // Add short description
            var postDescription = document.createElement('p');
            postDescription.textContent = shortDescription;
            post.appendChild(postDescription);

            // Add ingredients
            var postIngredients = document.createElement('p');
            postIngredients.textContent = 'Ingredients: ' + ingredients;
            post.appendChild(postIngredients);

            // Add instructions
            var postInstructions = document.createElement('p');
            postInstructions.innerHTML = 'Instructions:<br>' + instructions.map((step, index) => `${index + 1}. ${step}`).join('<br>');
            post.appendChild(postInstructions);

            // Append the new post to the posts container
            document.getElementById('posts-container').appendChild(post);
            addDeleteButton(post);

            // Close the modal
            var modal = document.getElementById("myModal");
            modal.style.display = "none";

            // Save the post to local storage
            savePostToLocalStorage();
        }

        // Function to save a draft
        function saveDraft() {
            var title = document.getElementById('postTitle').value;
            var shortDescription = document.getElementById('shortDescription').value;
            var ingredients = document.getElementById('postIngredients').value;

            var instructionsContainer = document.getElementById('instructionsContainer');
            var instructionInputs = instructionsContainer.getElementsByClassName('instructionInput');
            var instructions = [];
            for (var i = 0; i < instructionInputs.length; i++) {
                if (instructionInputs[i].value.trim() !== '') {
                    instructions.push(instructionInputs[i].value);
                }
            }

            var photo = document.getElementById('previewImage').src;

            // Create a new draft element
            var draft = document.createElement('div');
            draft.className = 'saved-item';

            // Add photo
            if (photo) {
                var draftImage = document.createElement('img');
                draftImage.src = photo;
                draft.appendChild(draftImage);
            }

            // Add title
            var draftTitle = document.createElement('h4');
            draftTitle.textContent = title;
            draft.appendChild(draftTitle);

            // Add short description
            var draftDescription = document.createElement('p');
            draftDescription.textContent = shortDescription;
            draft.appendChild(draftDescription);

            // Add ingredients
            var draftIngredients = document.createElement('p');
            draftIngredients.textContent = 'Ingredients: ' + ingredients;
            draft.appendChild(draftIngredients);

            // Add instructions
            var draftInstructions = document.createElement('p');
            draftInstructions.innerHTML = 'Instructions:<br>' + instructions.map((step, index) => `${index + 1}. ${step}`).join('<br>');
            draft.appendChild(draftInstructions);

            // Append the new draft to the drafts container
            var draftsContainer = document.getElementById('drafts-content');
            draftsContainer.appendChild(draft);
            addDeleteButton(draft);

            // Close the modal
            modal.style.display = "none";

            savePostToLocalStorage();
        }

        // Function to save a post to local storage
        function savePostToLocalStorage() {
            var postsContainer = document.getElementById('posts-container');
            var postsHTML = postsContainer.innerHTML;
            localStorage.setItem('posts', postsHTML);
        }

        // Function to save a draft to local storage
        function saveDraftToLocalStorage() {
            var draftsContainer = document.getElementById('drafts-content');
            var draftsHTML = draftsContainer.innerHTML;
            localStorage.setItem('drafts', draftsHTML);
        }

        // Function to load posts from local storage
        function loadPostsFromLocalStorage() {
            var postsContainer = document.getElementById('posts-container');
            var postsHTML = localStorage.getItem('posts');
            if (postsHTML) {
                postsContainer.innerHTML = postsHTML;
            }
        }

        // Function to load drafts from local storage
        function loadDraftsFromLocalStorage() {
            var draftsContainer = document.getElementById('drafts-content');
            var draftsHTML = localStorage.getItem('drafts');
            if (draftsHTML) {
                draftsContainer.innerHTML = draftsHTML;
            }
        }

        // Function to add a delete button to a saved item
        function addDeleteButton(savedItem) {
            // Create delete button
            var deleteButton = document.createElement('button');
            deleteButton.className = 'delete-button';
            deleteButton.textContent = 'Delete';

            // Add click event listener to delete button
            deleteButton.addEventListener('click', function(event) {
                // Show confirmation dialog before deleting
                var confirmDelete = confirm("Are you sure you want to delete this item?");
                if (confirmDelete) {
                    // Delete the saved item when confirmed
                    savedItem.remove();
                    // Save the updated list to local storage
                    savePostToLocalStorage(); // Assuming you want to update the list of posts in local storage
                    saveDraftToLocalStorage(); // Assuming you want to update the list of drafts in local storage
                }
            });

            // Append delete button to the saved item
            savedItem.appendChild(deleteButton);
        }
                // Call these functions when the page loads
                window.addEventListener('load', function() {
                    loadPostsFromLocalStorage();
                    loadDraftsFromLocalStorage();
                    addDeleteButtonsToSavedItems();
                });
 
    </script>
    
</body>
</html>